import unittest
import indicators


# Here's our "unit tests".
class IsOddTests(unittest.TestCase):

    #def testOne(self):
    #    self.failUnless(indicators.IsOdd(1))

    #def testTwo(self):
    #    self.failIf(indicators.IsOdd(2))

	def test_sma(self):
		self.assertEqual(indicators.sma([2,3,5,6],3),[3,4])
	
	def test_ema(self):
		input_quotes = [1.1403,1.1406,1.1406,1.1404,1.1406,1.1406,1.1405,1.1405,1.1406,1.1406,1.1406,1.1404,1.1405,1.1405,1.1405,1.1403,1.1404,1.1404,1.1405,1.1408,1.1406,1.1406,1.1404,1.1403,1.1404,1.1402,1.1401,1.1401,1.1388,1.1389,1.139,1.1391,1.139,1.1392,1.1392,1.1391,1.1396,1.14,1.1399,1.14,1.1401,1.1401,1.1399,1.1401,1.14,1.1396,1.1396,1.1398,1.14,1.1401,1.1402,1.1402,1.1401,1.14,1.1405,1.1407,1.1408,1.1411,1.1411,1.1413,1.1413,1.1408,1.1415,1.1415,1.1416,1.1415,1.1416,1.1418,1.1417,1.1415,1.142,1.1421,1.1421,1.1416,1.1415]
		wanted_ema = [1.1405,1.14053333333333,1.14052222222222,1.14051481481481,1.14054320987654,1.1405621399177,1.14057475994513,1.14051650663009,1.14051100442006,1.14050733628004,1.14050489085336,1.14043659390224,1.14042439593483,1.14041626395655,1.14044417597103,1.14056278398069,1.14057518932046,1.14058345954697,1.14052230636465,1.1404482042431,1.14043213616207,1.14035475744138,1.14026983829425,1.1402132255295,1.139742150353,1.13946143356867,1.13930762237911,1.13923841491941,1.13915894327961,1.13917262885307,1.13918175256871,1.13915450171248,1.13930300114165,1.13953533409443,1.13965688939629,1.13977125959753,1.13988083973168,1.13995389315446,1.13993592876964,1.13999061917976,1.13999374611984,1.13986249741323,1.13977499827548,1.13978333218366,1.1398555547891,1.13993703652607,1.14002469101738,1.14008312734492,1.14008875156328,1.14005916770885,1.1402061118059,1.14037074120394,1.14051382746929,1.14070921831286,1.14083947887524,1.14099298591683,1.14109532394455,1.1409968826297,1.1411645884198,1.14127639227987,1.14138426151991,1.14142284101327,1.14148189400885,1.14158792933923,1.14162528622616,1.14158352415077,1.14172234943385,1.1418482329559,1.14193215530393,1.14182143686929,1.14171429124619]
		def minus(x, y): return x-y
		diff = map(minus, wanted_ema, indicators.ema(input_quotes,5)) #diff for each item must be near zero
		self.assertTrue(sum(diff)/len(diff)<0.000001)

def main():
    unittest.main()

if __name__ == '__main__':
    main()